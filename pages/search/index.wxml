<!--pages/search/index.wxml-->
<page-meta class="search-wrapper">
  <van-nav-bar title="搜索" title-class='search-title' catchtap="backHome" custom-class='search-test-style' fixed="true">
    <van-icon name="arrow-left" slot="left" />
  </van-nav-bar>
  <view id='moreAction' class="index-search-wrapper">
    <view class="home-top-search-wrapper">
      <van-search
        value="{{value}}"
        placeholder="请输入位置"
        use-action-slot
        bind:change="onChange"
        bind:search="onSearch"
        shape="round"
        clearable="{{false}}"
        input-class="search-input-style"
      >
      </van-search>
      <image src="/image/home-search-icon.png" class="search-icon" catchtap="showChargeType" />
    </view>
    <view class="charge-item-wrapper">
      <view 
        wx:for="{{chargeBtnArray}}"
        wx:key="index"
        class="{{ choiceTypeValue === item.id ? 'charge-item charge-item-selected' : 'charge-item' }}"
        data-index="{{item.id}}"
        catchtap="choiceType"
      >
        <image src="{{ choiceTypeValue === item.id ? item.selectIcon : item.icon}}" class="charge-img" wx:if="{{index !== 0}}" />
        <text>{{item.name}}</text>
      </view>
    </view>
  </view>
  <scroll-view
    bindscrolltolower="scrollToLower"
    scroll-y="true"
    enable-passive="{{true}}"
    enable-back-to-top="{{true}}"
    lower-threshold="80"
    style="height: 100vh;"
    enhanced="{{true}}"
  >
    <view class="search-placeholder-div"></view>
    <view class="checked-mark-wrapper" wx:for="{{searchData}}" wx:key="index">
      <view class="mark-content-top">
        <view class="content-img">
          <image src="{{item.pic_cover}}" class="content-img-style" />
        </view>
        <view>
          <text class="checked-content-title">{{item.device_type}}</text>
          <view class="checked-content-detail">
            <text>{{item.distance}}</text>
            <text class="checked-content-address">{{item.address}}</text>
          </view>
          <view class="checked-pinlun-wrapper">
            <van-rate
              value="{{item.star_level}}"
              size="{{ 20 }}"
              color="#ffd21e"
              void-icon="star"
              void-color="#eee"
              readonly
            />
            <text class="checked-content-pinlun" catchtap="showCommentDetail" data-id="{{item.id}}">{{item.comment_number}}条评论</text>
          </view>
        </view>
      </view>
      <view class="mark-content-bottom">
        <view class="checked-content-bottom">
          <view class="checked-content-bg">
            <image src="/image/home-checked-juxing.png" />
            <text class="checked-content-type-text">{{ item.loc_type === 1 ? '小区' : '公用'}}</text>
          </view>
          <text class="type-chatou-num">插头：{{item.device_port}}个</text>
        </view>
        <view class="checked-content-go-wrapper">
          <image src="/image/home-checked-jiantou.png" class="go-btn-text-icon" />
          <text>去这里</text>
        </view>
      </view>
    </view>
  </scroll-view>
  
</page-meta>